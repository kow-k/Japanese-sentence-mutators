# ARDJ で使用した文編集のツール文編集ツール
突然変異を模した文の変種生成スクリプト

基本的には標準入力で文を受け付けて，標準出力に返す．
UTF-8エンコードが動作の条件．

## 必要なpythonパッケージ
- gensim [2.x以降]
- CaboCha
- MeCab

##　作動には gensim の word2vec が参照する単語類似度データが必要 (未提供だが，提供予定)

## changewords.py
(突然変異とのアナロジーで)入力文中の単語1語を別の語に置き換える． どの語に置き換えるかはBCCWJで学習したword2vecのモデルから選ぶ．
- 変異箇所は品詞単位で指定: --pos 0 で名詞を，--pos 1 で動詞を，--pos 2 で形容詞を，--pos 3 で副詞を，--pos 4 で格助詞を変更．
- ただし格助詞の変更のみ，類似度を使わないで頻度を反映したランダム変異としている．

- 置換する語は類似度の上限 (--ub n) と下限 (--lb n) の間にある候補の中からランダムに選択する．--lb と --ub オプションの項n はそれぞれ 0 から1.0 の範囲の類似度とする．
- 単語の置換は一度に1個だけだが，--repeat n で再帰的に n回反復する．
- 100回探して該当するものが見つからなかった場合は諦める．
- --no_hiragana でひらがなのみの語への置換を禁止 (多義語の意味の横滑りを抑制できる)．
- --silent で入力文の反復を禁止 (デフォールトとでは [original]のタグつきで入力を再生)．

## swapphrases.py
文中の節の順番を変える．節の境界はCaboChaによるもの．最後の節に直接係っているものだけが入れ替えの対象となる．入れ替え対象の節に係っている節はその節と一緒に移動する(なので，連体修飾など中の要素の順番は入れ替わらない)．
- --start i, --end j オプションで入れ替えの範囲を i番目の分節から j番目の分節に指定する．

## reducephrases.py
文中の節を段階的に削除する．節の境界はCaboChaによるもの．最後の節に直接係っているものだけが削除の対象となる．
- --lb n で削除で残る分節数の下限 nを指定．
- --exclude_wa で「は」で終わる節を削除対象から除外．

## 全体に共通する注意
- 入力に複文が来ることは想定していない(が，動作は一応する)
- ちゃんとしたエラー処理は未実装
